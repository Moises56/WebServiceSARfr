<div class="container text-center"  id="mis-consultas">
    <!-- Agregar imagen como título -->
    <img src="/assets/logos/DATOSAMDC.png" alt="MIS CONSULTAS" class="img-fluid mx-auto mb-3"
      style="width: 20%;padding-top: 15px;" />

      <!-- <h1 class="data-amdc"><b>DATOS AMDC</b></h1> -->

      <!-- search data for RTN and year -->
      <form [formGroup]="formData" (ngSubmit)="searchData()">
        <div class="row">
          <div class="col-12 card-tamanio">
          
            <div class="card-body">
                <!-- Identidad -->
                <div class="input-group mb-3">
                  <span class="input-group-text" id="basic-addon2"><b>Filtrar por: </b></span>
                  <input type="text" class="form-control" placeholder="RTN, DNI, ICS ó Contribuyente" aria-label="Número de Identidad"
                    aria-describedby="basic-addon2" formControlName="Rtn" required="true">

                    <button class="button-85" type="submit" id="button-addon2" (click)="open(content)">
                        Buscar
                      </button>
                </div>
            </div>


            <!-- <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Ingrese un RTN o DNI" aria-label="RTN" aria-describedby="button-addon2"
                formControlName="Rtn">
              <button class="btn btn-outline-secondary" type="submit" id="button-addon2">
                Buscar
              </button>
            </div> -->
            
          </div>
        </div>
        </form>

      
  
    <div class="table-responsive">
      <table class="table  table-striped table-hover">
        <thead style="border: 1px solid #5ccedf;">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Año</th>
            <th scope="col">RTN</th>
            <th scope="col">ICS</th>
            <th scope="col">Contribuyente</th>
            <th scope="col">Nombre Comercial</th>
            <th scope="col">ACTIVIDAD ECONOMICA</th>
            <th scope="col">Cantidad Declarada</th>

          </tr>
        </thead>
        <tbody>
          @for (data of datosAmdc; track data.id; let i = $index) {
          <tr>
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ data.ANIO }}</td>
            <td>{{ data.DNI_RTN }}</td>
            <td>{{ data.ICS }}</td>
            <td>{{ data.CONTRIBUYENTE }}</td>
            <td>{{ data.NOMBRE_COMERCIAL }}</td>
            <td>{{ data.ACTIVIDAD_ECONOMICA }}</td>
            <td>L. {{ data.CANTIDAD_DECLARADA }}</td>
          </tr>
          }
        </tbody>
      </table>
    </div>

  </div>
  
  <!-- paginaction -->
  <div class="container text-center">
    <div class="row">
      <div class="col-12">
        <ngb-pagination [collectionSize]="totalPages * limit" [(page)]="currentPage" [maxSize]="5" [rotate]="true"
          [boundaryLinks]="true" (pageChange)="pageChange($event)" [pageSize]="limit" [ellipses]="false"
          [directionLinks]="true" [disabled]="false" />
  
      </div>
    </div>
  </div>
  


    <!-- DATA AMDC-->
<ng-template #content let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">DATOS AMDC</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div class="modal-body">

    <div class="container text-center">
      <div class="row">
        <div class="col">

          <h1 class="data-amdc"><b>DATOS AMDC</b></h1>

          @if (isLoadding) {
            <div class="container">
              <div class="row justify-content-center align-items-center">
                <div class="d-flex justify-content-center">
            
                  <div class="loader">
                        <div class="outer"></div>
                        <div class="middle"></div>
                        <div class="inner"></div>
                      </div>
            
            
                  <!-- <div class="progress-bar-container">
                    <div class="progress-bar stripes animated reverse slower">
                      <span class="progress-bar-inner" [style.width.%]="progress">{{ progress }}%</span>
                    </div>
                  </div> -->
                </div>
              </div>
            </div>
            
            }

          <div class="table-responsive">
            <table class="table  table-striped table-hover">
              <thead style="border: 1px solid #5ccedf;">
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Año</th>
                  <th scope="col">RTN</th>
                  <th scope="col">ICS</th>
                  <th scope="col">Contribuyente</th>
                  <th scope="col">Nombre Comercial</th>
                  <th scope="col">ACTIVIDAD ECONOMICA</th>
                  <th scope="col">Cantidad Declarada</th>
      
                </tr>
              </thead>
              <tbody>
                @for (data of onDatosAmdc; track data.id; let i = $index) {
                <tr>
                  <th scope="row">{{ i + 1 }}</th>
                  <td>{{ data.ANIO }}</td>
                  <td>{{ data.DNI_RTN }}</td>
                  <td>{{ data.ICS }}</td>
                  <td>{{ data.CONTRIBUYENTE }}</td>
                  <td>{{ data.NOMBRE_COMERCIAL }}</td>
                  <td>{{ data.ACTIVIDAD_ECONOMICA }}</td>
                  <td>L. {{ data.CANTIDAD_DECLARADA }}</td>
                </tr>
                }
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>

    <!-- paginaction -->
  <div class="container text-center">
    <div class="row">
      <div class="col-12">
        <ngb-pagination [collectionSize]="totalPages2 * limit" [(page)]="currentPage2" [maxSize]="5" [rotate]="true"
          [boundaryLinks]="true" (pageChange)="pageChange2($event)" [pageSize]="limit" [ellipses]="false"
          [directionLinks]="true" [disabled]="false" />
  
      </div>
    </div>
  </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">cerrar</button>
  </div>
</ng-template>
